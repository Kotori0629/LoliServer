--- a/net/minecraft/world/entity/projectile/ThrownEnderpearl.java
+++ b/net/minecraft/world/entity/projectile/ThrownEnderpearl.java
@@ -1,6 +_,7 @@
 package net.minecraft.world.entity.projectile;
 
 import javax.annotation.Nullable;
+
 import net.minecraft.core.particles.ParticleTypes;
 import net.minecraft.server.level.ServerLevel;
 import net.minecraft.server.level.ServerPlayer;
@@ -16,79 +_,96 @@
 import net.minecraft.world.level.Level;
 import net.minecraft.world.phys.EntityHitResult;
 import net.minecraft.world.phys.HitResult;
+import org.bukkit.Bukkit;
+import org.bukkit.craftbukkit.v1_19_R1.event.CraftEventFactory;
+import org.bukkit.event.entity.CreatureSpawnEvent;
+import org.bukkit.event.player.PlayerTeleportEvent;
 
 public class ThrownEnderpearl extends ThrowableItemProjectile {
-   public ThrownEnderpearl(EntityType<? extends ThrownEnderpearl> p_37491_, Level p_37492_) {
-      super(p_37491_, p_37492_);
-   }
-
-   public ThrownEnderpearl(Level p_37499_, LivingEntity p_37500_) {
-      super(EntityType.f_20484_, p_37500_, p_37499_);
-   }
-
-   protected Item m_7881_() {
-      return Items.f_42584_;
-   }
-
-   protected void m_5790_(EntityHitResult p_37502_) {
-      super.m_5790_(p_37502_);
-      p_37502_.m_82443_().m_6469_(DamageSource.m_19361_(this, this.m_37282_()), 0.0F);
-   }
-
-   protected void m_6532_(HitResult p_37504_) {
-      super.m_6532_(p_37504_);
-
-      for(int i = 0; i < 32; ++i) {
-         this.f_19853_.m_7106_(ParticleTypes.f_123760_, this.m_20185_(), this.m_20186_() + this.f_19796_.m_188500_() * 2.0D, this.m_20189_(), this.f_19796_.m_188583_(), 0.0D, this.f_19796_.m_188583_());
-      }
-
-      if (!this.f_19853_.f_46443_ && !this.m_213877_()) {
-         Entity entity = this.m_37282_();
-         if (entity instanceof ServerPlayer) {
-            ServerPlayer serverplayer = (ServerPlayer)entity;
-            if (serverplayer.f_8906_.m_6198_().m_129536_() && serverplayer.f_19853_ == this.f_19853_ && !serverplayer.m_5803_()) {
-               if (this.f_19796_.m_188501_() < 0.05F && this.f_19853_.m_46469_().m_46207_(GameRules.f_46134_)) {
-                  Endermite endermite = EntityType.f_20567_.m_20615_(this.f_19853_);
-                  endermite.m_7678_(entity.m_20185_(), entity.m_20186_(), entity.m_20189_(), entity.m_146908_(), entity.m_146909_());
-                  this.f_19853_.m_7967_(endermite);
-               }
-
-               if (entity.m_20159_()) {
-                  serverplayer.m_142098_(this.m_20185_(), this.m_20186_(), this.m_20189_());
-               } else {
-                  entity.m_6021_(this.m_20185_(), this.m_20186_(), this.m_20189_());
-               }
-
-               entity.m_183634_();
-               entity.m_6469_(DamageSource.f_19315_, 5.0F);
+    public ThrownEnderpearl(EntityType<? extends ThrownEnderpearl> p_37491_, Level p_37492_) {
+        super(p_37491_, p_37492_);
+    }
+
+    public ThrownEnderpearl(Level p_37499_, LivingEntity p_37500_) {
+        super(EntityType.f_20484_, p_37500_, p_37499_);
+    }
+
+    protected Item m_7881_() {
+        return Items.f_42584_;
+    }
+
+    protected void m_5790_(EntityHitResult p_37502_) {
+        super.m_5790_(p_37502_);
+        p_37502_.m_82443_().m_6469_(DamageSource.m_19361_(this, this.m_37282_()), 0.0F);
+    }
+
+    protected void m_6532_(HitResult p_37504_) {
+        super.m_6532_(p_37504_);
+
+        for (int i = 0; i < 32; ++i) {
+            this.f_19853_.m_7106_(ParticleTypes.f_123760_, this.m_20185_(), this.m_20186_() + this.f_19796_.m_188500_() * 2.0D, this.m_20189_(), this.f_19796_.m_188583_(), 0.0D, this.f_19796_.m_188583_());
+        }
+
+        if (!this.f_19853_.f_46443_ && !this.m_213877_()) {
+            Entity entity = this.m_37282_();
+            if (entity instanceof ServerPlayer) {
+                ServerPlayer serverplayer = (ServerPlayer) entity;
+                if (serverplayer.f_8906_.m_6198_().m_129536_() && serverplayer.f_19853_ == this.f_19853_ && !serverplayer.m_5803_()) {
+                    net.minecraftforge.event.entity.EntityTeleportEvent.EnderPearl event = net.minecraftforge.event.ForgeEventFactory.onEnderPearlLand(serverplayer, this.m_20185_(), this.m_20186_(), this.m_20189_(), this, 5.0F, p_37504_);
+                    if (!event.isCanceled()) { // Don't indent to lower patch size
+                        // CraftBukkit start - Fire PlayerTeleportEvent
+                        org.bukkit.craftbukkit.v1_19_R1.entity.CraftPlayer player = serverplayer.getBukkitEntity();
+                        org.bukkit.Location location = getBukkitEntity().getLocation();
+                        location.setPitch(player.getLocation().getPitch());
+                        location.setYaw(player.getLocation().getYaw());
+                        PlayerTeleportEvent teleEvent = new PlayerTeleportEvent(player, player.getLocation(), location, PlayerTeleportEvent.TeleportCause.ENDER_PEARL);
+                        Bukkit.getPluginManager().callEvent(teleEvent);
+                        if (!teleEvent.isCancelled() && !serverplayer.f_8906_.isDisconnected()) {
+                            if (this.f_19796_.m_188501_() < 0.05F && this.f_19853_.m_46469_().m_46207_(GameRules.f_46134_)) {
+                                Endermite entityendermite = (Endermite) EntityType.f_20567_.m_20615_(this.f_19853_);
+                                entityendermite.m_7678_(entity.m_20185_(), entity.m_20186_(), entity.m_20189_(), entity.m_146908_(), entity.m_146909_());
+                                this.f_19853_.addFreshEntity(entityendermite, CreatureSpawnEvent.SpawnReason.ENDER_PEARL);
+                            }
+                            if (entity.m_20159_()) {
+                                entity.m_8127_();
+                            }
+                            serverplayer.f_8906_.teleport(teleEvent.getTo());
+                            entity.m_183634_();
+                            CraftEventFactory.entityDamage = this;
+                            entity.m_6469_(DamageSource.f_19315_, 5.0F);
+                            CraftEventFactory.entityDamage = null;
+                        }
+                        // CraftBukkit end
+                        //Forge: End
+                    }
+                } else if (entity != null) {
+                    entity.m_6021_(this.m_20185_(), this.m_20186_(), this.m_20189_());
+                    entity.m_183634_();
+                }
+
+                this.m_146870_();
             }
-         } else if (entity != null) {
-            entity.m_6021_(this.m_20185_(), this.m_20186_(), this.m_20189_());
-            entity.m_183634_();
-         }
-
-         this.m_146870_();
-      }
-
-   }
-
-   public void m_8119_() {
-      Entity entity = this.m_37282_();
-      if (entity instanceof Player && !entity.m_6084_()) {
-         this.m_146870_();
-      } else {
-         super.m_8119_();
-      }
-
-   }
-
-   @Nullable
-   public Entity m_5489_(ServerLevel p_37506_) {
-      Entity entity = this.m_37282_();
-      if (entity != null && entity.f_19853_.m_46472_() != p_37506_.m_46472_()) {
-         this.m_5602_((Entity)null);
-      }
-
-      return super.m_5489_(p_37506_);
-   }
+
+        }
+    }
+
+    public void m_8119_() {
+        Entity entity = this.m_37282_();
+        if (entity instanceof Player && !entity.m_6084_()) {
+            this.m_146870_();
+        } else {
+            super.m_8119_();
+        }
+
+    }
+
+    @Nullable
+    public Entity changeDimension(ServerLevel p_37506_, net.minecraftforge.common.util.ITeleporter teleporter) {
+        Entity entity = this.m_37282_();
+        if (entity != null && p_37506_ != null && entity.f_19853_.m_46472_() != p_37506_.m_46472_()) { // CraftBukkit - SPIGOT-6113
+            this.m_5602_((Entity) null);
+        }
+
+        return super.changeDimension(p_37506_, teleporter);
+    }
 }
